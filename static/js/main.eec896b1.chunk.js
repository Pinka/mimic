(this.webpackJsonpmimic=this.webpackJsonpmimic||[]).push([[0],[,,,,function(e,t,n){e.exports={tools:"PaperTools_tools__1gGrH",toolButton:"PaperTools_toolButton__3H_SE"}},,,function(e,t,n){e.exports={history:"History_history__3cTjF"}},,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t){},,function(e,t){},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o),a=n(6),r=n.n(a),c=(n(14),n(0)),l=n.n(c),s=n(2),u=n(3),f=[],d=function(){f=[],l.a.project.activeLayer.getItems().forEach((function(e){"rest"===e.data.type&&f.push(Object(u.a)({},e.data))}))},p=function(e){var t=e.payload,n=t.item,o=t.itemName,i=t.values,a=function(t){"update"===e.type&&m(t,i)};o&&l.a.project.getItems({name:o}).forEach((function(e){a(e)})),n&&a(n)},v=function(e){return l.a.project.getItems({match:function(t){return 0===(t.name||"").indexOf(e)}})},m=function(e,t){if(t.position&&e.position){var n=t.position.x||e.position.x,o=t.position.y||e.position.y,i=new l.a.Point(n,o);e.tweenTo({position:i},300)}if(t.point&&e.point){var a=t.point.x||e.point.x,r=t.point.y||e.point.y,c=new l.a.Point(a,r);e.point=c}t.content&&e.content&&(e.content=t.content);var u=["position","point","content"];return Object.keys(t).filter((function(e){return!u.includes(e)})).forEach((function(n){void 0!==e[n]&&e.tweenTo(Object(s.a)({},n,t[n]),300)})),e},h=function(){var e=new l.a.Path;e.strokeColor="rgba(0,0,0,0.87)",e.strokeWidth=2,e.name="line"+v("line").length;var t=new l.a.Point(100,100);e.moveTo(t),e.lineTo(t.add([200,-50])),l.a.project.activeLayer.selected=!1,e.selected=!0},g=function(){var e=new l.a.Path.Circle(new l.a.Point(100,100),50);e.fillColor="rgba(0,0,0,0.87)",e.strokeColor="rgba(0,0,0,0.87)",e.strokeWidth=2,e.closed=!0,e.name="circle"+v("circle").length,l.a.project.activeLayer.selected=!1,e.selected=!0},y=function(){var e=new l.a.Path.Rectangle(0,0,100,100);e.fillColor="rgba(0,0,0,0.87)",e.strokeColor="rgba(0,0,0,0.87)",e.strokeWidth=2,e.closed=!0,e.name="rect"+v("rect").length,l.a.project.activeLayer.selected=!1,e.selected=!0},w=function(e){var t=e.point||new l.a.Point(100,100),n=e.content||"Text",o=new l.a.PointText(t);return o.justification="center",o.fillColor="black",o.strokeWidth=2,o.content=n,o.name="text"+v("text").length,o.onClick=e.onClick,o},k=function(){var e=l.a.project.activeLayer.exportJSON();localStorage.setItem("project",e)},b=function(){var e=localStorage.getItem("project");e&&l.a.project.activeLayer.importJSON(e)},j=[],C=[],x=function(){return j.slice()},E=function(){if(0!==(null===j||void 0===j?void 0:j.length)){var e=j.pop();if(C.forEach((function(e){return e(x())})),"segment.point"===(null===e||void 0===e?void 0:e.key)){var t=e.payload,n=t.segment,o=t.from;n&&p({type:"update",payload:{item:n,values:{point:o}}})}}},P=function(){if(!l.a.tools.find((function(e){return"toolSelect"===e.name}))){var e=new l.a.Tool;e.name="toolSelect",e.minDistance=5;var t,n,o={segments:!0,stroke:!0,fill:!0,tolerance:5};e.onMouseDown=function(e){t=n=null;var i=l.a.project.hitTest(e.point,o);if(i)if(e.modifiers.shift)"segment"===i.type&&i.segment.remove();else{if(n=i.item,"segment"===i.type)t=i.segment;else if("stroke"===i.type){var a=i.location;t=n.insert(a.index+1,e.point),n.smooth()}"fill"===i.type&&l.a.project.activeLayer.addChild(i.item)}},e.onMouseMove=function(e){if(e.item){if("button"===e.item.name)return;l.a.project.activeLayer.selected=!1,e.item.selected=!0}},e.onMouseDrag=function(e){if(t){var o=t.point.add(e.delta);t.point=o}else n&&n.selected&&(n.position=n.position.add(e.delta))},e.onMouseUp=function(e){if(t){var n=e.point.subtract(e.delta),o=e.point;i={key:"segment.point",payload:{segment:t,from:n,to:o}},j.push(i),j.length>1e3&&j.pop(),C.forEach((function(e){return e(x())}))}var i}}},O=Object(o.memo)((function(){var e=Object(o.useRef)(),t=Object(o.useRef)([]);return Object(o.useEffect)((function(){var n=t.current;l.a.setup(e.current),P(),function(){var e=l.a.project.activeLayer,t={color:"rgba(0,0,0,0.11)",width:l.a.view.viewSize.width,height:l.a.view.viewSize.height},n=function(e){var t=new l.a.Path(e);return t.strokeColor="rgba(0,0,0,0.21)",t.strokeWidth=1,t.locked=!0,t};(new l.a.Layer).name="grid-layer",function(e){for(var t=e.color,o=e.width,i=e.height,a=[],r=0;r<o;r++)if(r%10===0){var c=new l.a.Point(r,0),s=new l.a.Point(r,i),u=n([c,s]);u.strokeColor=t,u.strokeWidth=r%50===0?2:1,a.push(u)}}(t),function(e){for(var t=e.color,o=e.width,i=e.height,a=[],r=0;r<i;r++)if(r%10===0){var c=new l.a.Point(0,r),s=new l.a.Point(o,r),u=n([c,s]);u.strokeColor=t,u.strokeWidth=r%50===0?2:1,a.push(u)}}(t),e.activate()}(),b(),d(),l.a.view.onFrame=function(e){if(n.length>0){var t=n[n.length-1];p(t);var o=n.indexOf(t);o>-1&&n.splice(o,1)}};var o=setInterval((function(){new Array(10).fill(null).map((function(e,t){return{type:"update",payload:{itemName:"rect"+t,values:{fillColor:l.a.Color.random()}}}})).forEach((function(e){n.push(e)}))}),1e3),i=setInterval((function(){fetch("https://jsonplaceholder.typicode.com/todos/1").then((function(e){return e.json()})).then((function(e){var t={type:"update",payload:{itemName:"text1",values:{content:e.title}}};n.push(t)}))}),5e3);clearInterval(o),clearInterval(i)}),[]),i.a.createElement("canvas",{ref:e,resize:"resize"})})),S=n(4),W=n.n(S),L=Object(o.memo)((function(){var e=[{title:"Add Line",onClick:h},{title:"Add Circle",onClick:g},{title:"Add Rect",onClick:y},{title:"Add Text",onClick:w},{title:"Save",onClick:k},{title:"Load",onClick:b},{title:"Undo",onClick:E},{title:"Bind",onClick:function(){l.a.project.getItems({name:"text0"}).forEach((function(e){e.data=Object(u.a)({},e.data,{type:"rest",url:"https://jsonplaceholder.typicode.com/todos/1",sourceKey:"title",destKey:"content"}),console.log("item binded"),d()}))}}];return i.a.createElement("div",{className:"".concat(W.a.tools," tools-0")},e.map((function(e,t){return i.a.createElement("button",{key:t,className:W.a.toolButton,onClick:e.onClick},e.title)})))})),T=n(8),I=n(7),A=n.n(I),N=Object(o.memo)((function(){var e,t=Object(o.useState)(x()),n=Object(T.a)(t,2),a=n[0],r=void 0===a?[]:a,c=n[1];return e=function(e){c(e)},C.push(e),i.a.createElement("ul",{className:A.a.history},r.map((function(e,t){var n,o,a,r;return i.a.createElement("li",{key:t},"".concat(e.key,": x/y = ").concat(null===(n=e.payload)||void 0===n?void 0:n.from.x,"/").concat(null===(o=e.payload)||void 0===o?void 0:o.from.y," -> ").concat(null===(a=e.payload)||void 0===a?void 0:a.to.x,"/").concat(null===(r=e.payload)||void 0===r?void 0:r.to.y))})))}));var _=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(O,null),i.a.createElement(L,null),i.a.createElement(N,null))},R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(i.a.createElement(_,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/mimic",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/mimic","/service-worker.js");R?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):B(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):B(t,e)}))}}()}],[[9,1,2]]]);
//# sourceMappingURL=main.eec896b1.chunk.js.map