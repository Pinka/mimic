(this.webpackJsonpmimic=this.webpackJsonpmimic||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(16)},,,,,function(e,t,n){},function(e,t){},,function(e,t){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o),a=n(5),c=n.n(a),r=(n(11),n(0)),l=n.n(r),s=n(3),d=n(2),u=[],f=function(){u=[],l.a.project.activeLayer.getItems().forEach((function(e){"rest"===e.data.type&&u.push(Object(d.a)({},e.data))}))},m=function(e){return l.a.project.getItems({match:function(t){return 0===(t.name||"").indexOf(e)}})},p=function(e,t){if(t.position&&e.position){var n=t.position.x||e.position.x,o=t.position.y||e.position.y,i=new l.a.Point(n,o);e.tweenTo({position:i},300)}t.content&&e.content&&(e.content=t.content);var a=["position","content"];return Object.keys(t).filter((function(e){return!a.includes(e)})).forEach((function(n){void 0!==e[n]&&e.tweenTo(Object(s.a)({},n,t[n]),300)})),e},h=function(){var e=new l.a.Path;e.strokeColor="rgba(0,0,0,0.87)",e.strokeWidth=2,e.name="line"+m("line").length;var t=new l.a.Point(100,100);e.moveTo(t),e.lineTo(t.add([200,-50])),l.a.project.activeLayer.selected=!1,e.selected=!0},v=function(){var e=new l.a.Path.Circle(new l.a.Point(100,100),50);e.fillColor="rgba(0,0,0,0.87)",e.strokeColor="rgba(0,0,0,0.87)",e.strokeWidth=2,e.closed=!0,e.name="circle"+m("circle").length,l.a.project.activeLayer.selected=!1,e.selected=!0},g=function(){var e=new l.a.Path.Rectangle(0,0,100,100);e.fillColor="rgba(0,0,0,0.87)",e.strokeColor="rgba(0,0,0,0.87)",e.strokeWidth=2,e.closed=!0,e.name="rect"+m("rect").length,l.a.project.activeLayer.selected=!1,e.selected=!0},w=function(e){var t=e.point||new l.a.Point(100,100),n=e.content||"Text",o=new l.a.PointText(t);return o.justification="center",o.fillColor="black",o.strokeWidth=2,o.content=n,o.name="text"+m("text").length,o.onClick=e.onClick,o},y=function(){var e=l.a.project.activeLayer.exportJSON();localStorage.setItem("project",e)},b=function(){var e=localStorage.getItem("project");e&&l.a.project.activeLayer.importJSON(e)},k=Object(o.memo)((function(){var e=Object(o.useRef)(),t=Object(o.useRef)([]);return Object(o.useEffect)((function(){var n=t.current;l.a.setup(e.current),function(){var e=document.querySelectorAll(".tools"),t=document.createElement("div");t.className="tools tools-".concat(e.length),document.body.appendChild(t);var n=function(e){var n=e.title,o=e.comand,i=document.createElement("button");i.className="tool-button",i.textContent=n,i.type="button",i.onclick=o,t.appendChild(i)};n({title:"Add Line",comand:h}),n({title:"Add Circle",comand:v}),n({title:"Add Rect",comand:g}),n({title:"Add Text",comand:w}),n({title:"Save",comand:y}),n({title:"Load",comand:b}),n({title:"Bind",comand:function(){l.a.project.getItems({name:"text0"}).forEach((function(e){e.data=Object(d.a)({},e.data,{type:"rest",url:"https://jsonplaceholder.typicode.com/todos/1",sourceKey:"title",destKey:"content"}),console.log("item binded"),f()}))}})}(),function(){if(!l.a.tools.find((function(e){return"toolSelect"===e.name}))){var e=new l.a.Tool;e.name="toolSelect";var t,n,o={segments:!0,stroke:!0,fill:!0,tolerance:5};e.onMouseDown=function(e){t=n=null;var i=l.a.project.hitTest(e.point,o);if(i)if(e.modifiers.shift)"segment"===i.type&&i.segment.remove();else{if(i)if(n=i.item,"segment"===i.type)t=i.segment;else if("stroke"===i.type){var a=i.location;t=n.insert(a.index+1,e.point),n.smooth()}"fill"===i.type&&l.a.project.activeLayer.addChild(i.item)}},e.onMouseMove=function(e){if(e.item){if("button"===e.item.name)return;l.a.project.activeLayer.selected=!1,e.item.selected=!0}},e.onMouseDrag=function(e){t?t.point=t.point.add(e.delta):n&&n.selected&&(n.position=n.position.add(e.delta))}}}(),function(){var e=l.a.project.activeLayer,t={color:"rgba(0,0,0,0.11)",width:l.a.view.viewSize.width,height:l.a.view.viewSize.height},n=function(e){var t=new l.a.Path(e);return t.strokeColor="rgba(0,0,0,0.21)",t.strokeWidth=1,t.locked=!0,t};(new l.a.Layer).name="grid-layer",function(e){for(var t=e.color,o=e.width,i=e.height,a=[],c=0;c<o;c++)if(c%10===0){var r=new l.a.Point(c,0),s=new l.a.Point(c,i),d=n([r,s]);d.strokeColor=t,d.strokeWidth=c%50===0?2:1,a.push(d)}}(t),function(e){for(var t=e.color,o=e.width,i=e.height,a=[],c=0;c<i;c++)if(c%10===0){var r=new l.a.Point(0,c),s=new l.a.Point(o,c),d=n([r,s]);d.strokeColor=t,d.strokeWidth=c%50===0?2:1,a.push(d)}}(t),e.activate()}(),b(),f(),l.a.view.onFrame=function(e){if(n.length>0){var t=n[n.length-1];!function(e){console.log("on Action:",e);var t=e.payload,n=t.item,o=t.itemName,i=t.values,a=function(t){"update"===e.type&&p(t,i)};o&&l.a.project.getItems({name:o}).forEach((function(e){a(e)})),n&&a(n)}(t);var o=n.indexOf(t);o>-1&&n.splice(o,1)}};var o=setInterval((function(){new Array(10).fill(null).map((function(e,t){return{type:"update",payload:{itemName:"rect"+t,values:{fillColor:l.a.Color.random()}}}})).forEach((function(e){n.push(e)}))}),1e3),i=setInterval((function(){fetch("https://jsonplaceholder.typicode.com/todos/1").then((function(e){return e.json()})).then((function(e){var t={type:"update",payload:{itemName:"text1",values:{content:e.title}}};n.push(t)}))}),5e3);return function(){clearInterval(o),clearInterval(i)}}),[]),i.a.createElement("canvas",{ref:e,resize:"resize"})})),j=Object(o.memo)((function(){var e=[{title:"Add Line",comand:h},{title:"Add Circle",comand:v},{title:"Add Rect",comand:g},{title:"Add Text",comand:w},{title:"Save",comand:y},{title:"Load",comand:b},{title:"Bind",comand:function(){l.a.project.getItems({name:"text0"}).forEach((function(e){e.data=Object(d.a)({},e.data,{type:"rest",url:"https://jsonplaceholder.typicode.com/todos/1",sourceKey:"title",destKey:"content"}),console.log("item binded"),f()}))}}];return i.a.createElement("div",{className:"tools tools-0"},e.map((function(e,t){return i.a.createElement("button",{key:t,className:"tool-button",onClick:e.onClick},e.title)})))}));n(15);var C=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(k,null),i.a.createElement(j,null))},E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(i.a.createElement(C,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/mimic",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/mimic","/service-worker.js");E?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):x(t,e)}))}}({onUpdate:function(){return alert("New content is available and will be used when all tabs for this page are closed.")},onSuccess:function(){return function(){alert("Content is cached for offline use.")}}})}],[[6,1,2]]]);
//# sourceMappingURL=main.a7ee6ce5.chunk.js.map