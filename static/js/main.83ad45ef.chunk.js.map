{"version":3,"sources":["paper/utils.js","paper/tools/history.js","paper/tools/select.js","paper/index.js","Portal/index.js","MimicList/index.js","paper/PaperTools/index.js","paper/History/index.js","paper/Bind/index.js","store/activeMimic/reducer.js","App.js","serviceWorker.js","index.js","paper/PaperTools/PaperTools.module.css","paper/Bind/Bind.module.css","paper/History/History.module.css"],"names":["sorageUrl","bind","getItems","forEach","item","a","data","type","fetch","url","then","response","json","res","value","get","sourceKey","set","destKey","onAction","action","payload","itemName","values","processAction","updateItem","paper","project","name","activeLayer","getItemsByName","match","indexOf","position","x","y","newPosition","Point","tweenTo","point","newPoint","content","excludedValues","Object","keys","filter","key","includes","undefined","addLine","path","Path","strokeColor","strokeWidth","length","start","moveTo","lineTo","add","selected","addCircle","Circle","fillColor","closed","addRect","Rectangle","addText","props","text","PointText","justification","onClick","createNew","mimicName","faker","random","words","mimicLayer","getMimicLayer","clear","save","config","exportJSON","localStorage","setItem","method","mode","cache","headers","body","JSON","stringify","console","log","load","getItem","addLayer","Layer","activate","importJSON","getMimicsList","mimics","layers","getMimicName","obj","separator","properties","Array","isArray","split","reduce","prev","curr","p","shift","history","onChangeListeners","getHistory","slice","addToolSelect","tools","find","tool","Tool","minDistance","segment","hitOptions","segments","stroke","fill","tolerance","onMouseDown","event","hitResult","hitTest","modifiers","remove","location","insert","index","smooth","addChild","onMouseMove","onMouseDrag","to","delta","onMouseUp","from","subtract","push","pop","callback","Paper","memo","ref","useRef","actionQueue","dispatch","useContext","ActiveMimicContext","useEffect","queue","current","setup","prevLayer","gridConfig","color","width","view","viewSize","height","drawLine","locked","lines","i","b","line","drawGridVerticalLines","drawGridHorizontalLines","addGrid","onFrame","splice","setInterval","map","Color","resize","Portal","portalEl","document","createElement","appendChild","this","removeChild","ReactDOM","createPortal","children","React","Component","MimicList","triggerRef","popupRef","popperRef","useState","isOpen","setIsOpen","mimicList","setMimicList","createPopper","placement","strategy","destroy","togglePopup","prevValue","setTimeout","forceUpdate","className","focusTrapOptions","onDeactivate","clickOutsideDeactivates","tabIndex","onSelect","PaperTools","useCallback","mimic","title","component","styles","toolButton","MimicName","state","History","setHistory","Bind","showBind","setShowBind","form","setForm","availableItems","setAvailableItems","onChange","updatedForm","target","htmlFor","actions","binding","defaultBinding","bindItem","addBinding","sort","initialState","reducer","createContext","App","useReducer","Provider","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","render","getElementById","URL","process","href","origin","addEventListener","contentType","status","ready","unregister","reload","checkValidServiceWorker","module","exports"],"mappings":"6PAQMA,EAAY,0EAMLC,EAAO,WAEhBC,IACKC,QADL,uCACa,WAAMC,GAAN,iBAAAC,EAAA,yDAEkB,SAAnBD,EAAKE,KAAKC,KAFT,gCAIiBC,MAAMJ,EAAKE,KAAKG,KAC7BC,MAAK,SAACC,GAAD,OAAcA,EAASC,UALhC,OAIKC,EAJL,OAOKC,EAAQC,EAAIF,EAAKT,EAAKE,KAAKU,WACjCC,EAAIb,EAAMA,EAAKE,KAAKY,QAASJ,GAR5B,2CADb,wDAcSK,EAAW,SAACC,GAAW,MAGGA,EAAOC,QAAlCjB,EAHwB,EAGxBA,KAAMkB,EAHkB,EAGlBA,SAAUC,EAHQ,EAGRA,OAElBC,EAAgB,SAACpB,GACC,WAAhBgB,EAAOb,MACPkB,EAAWrB,EAAMmB,IAIrBD,GACAI,IAAMC,QAAQzB,SAAS,CACnB0B,KAAMN,IACPnB,SAAQ,SAAAC,GACPoB,EAAcpB,MAIlBA,GACAoB,EAAcpB,IASTF,EAAW,WAAO,IAAD,IAC1B,2BAAOwB,IAAMC,eAAb,aAAO,EAAeE,YAAY3B,kBAAlC,QAAgD,IAGvC4B,EAAiB,SAACF,GAC3B,OAAOF,IAAMC,QAAQzB,SAAS,CAC1B6B,MAAO,SAAC3B,GAAD,OAA8C,KAAnCA,EAAKwB,MAAQ,IAAII,QAAQJ,OAItCH,EAAa,SAAUrB,EAAMmB,GAEtC,GAAIA,EAAOU,UAAY7B,EAAK6B,SAAU,CAElC,IAAMC,EAAIX,EAAOU,SAASC,GAAK9B,EAAK6B,SAASC,EACvCC,EAAIZ,EAAOU,SAASE,GAAK/B,EAAK6B,SAASE,EACvCC,EAAc,IAAIV,IAAMW,MAAMH,EAAGC,GAEvC/B,EAAKkC,QACD,CAAE,SAAYF,GACd,KAIR,GAAIb,EAAOgB,OAASnC,EAAKmC,MAAO,CAE5B,IAAML,EAAIX,EAAOgB,MAAML,GAAK9B,EAAKmC,MAAML,EACjCC,EAAIZ,EAAOgB,MAAMJ,GAAK/B,EAAKmC,MAAMJ,EACjCK,EAAW,IAAId,IAAMW,MAAMH,EAAGC,GAEpC/B,EAAKmC,MAAQC,EAGbjB,EAAOkB,SAAWrC,EAAKqC,UACvBrC,EAAKqC,QAAUlB,EAAOkB,SAG1B,IAAMC,EAAiB,CAAC,WAAY,QAAS,WAc7C,OAZAC,OAAOC,KAAKrB,GACPsB,QAAO,SAAAC,GAAG,OAAKJ,EAAeK,SAASD,MACvC3C,SAAQ,SAAA2C,QAEaE,IAAd5C,EAAK0C,IACL1C,EAAKkC,QAAL,eACOQ,EAAMvB,EAAOuB,IAChB,QAKT1C,GAkCE6C,EAAU,WAEnB,IACMC,EAAO,IAAIxB,IAAMyB,KACvBD,EAAKE,YAhJyB,mBAiJ9BF,EAAKG,YAAc,EACnBH,EAAKtB,KAJQ,OAIME,EAJN,QAI2BwB,OAExC,IAAMC,EAAQ,IAAI7B,IAAMW,MAAM,IAAK,KACnCa,EAAKM,OAAOD,GACZL,EAAKO,OAAOF,EAAMG,IAAI,CAAC,KAAM,MAE7BhC,IAAMC,QAAQE,YAAY8B,UAAW,EACrCT,EAAKS,UAAW,GAGPC,EAAY,WAErB,IACMV,EAAO,IAAIxB,IAAMyB,KAAKU,OAAO,IAAInC,IAAMW,MAAM,IAAK,KAAM,IAE9Da,EAAKY,UAlKuB,mBAmK5BZ,EAAKE,YAlKyB,mBAmK9BF,EAAKG,YAAc,EACnBH,EAAKa,QAAS,EACdb,EAAKtB,KAPQ,SAOME,EAPN,UAO2BwB,OAExC5B,IAAMC,QAAQE,YAAY8B,UAAW,EACrCT,EAAKS,UAAW,GAGPK,EAAU,WAEnB,IACMd,EAAO,IAAIxB,IAAMyB,KAAKc,UAAU,EAAG,EAAG,IAAK,KAEjDf,EAAKY,UAjLuB,mBAkL5BZ,EAAKE,YAjLyB,mBAkL9BF,EAAKG,YAAc,EACnBH,EAAKa,QAAS,EACdb,EAAKtB,KAPQ,OAOME,EAPN,QAO2BwB,OAExC5B,IAAMC,QAAQE,YAAY8B,UAAW,EACrCT,EAAKS,UAAW,GAGPO,EAAU,SAACC,GAEpB,IACM5B,EAAQ4B,EAAM5B,OAAS,IAAIb,IAAMW,MAAM,IAAK,KAC5CI,EAAU0B,EAAM1B,SAAW,OAE3B2B,EAAO,IAAI1C,IAAM2C,UAAU9B,GASjC,OARA6B,EAAKE,cAAgB,SACrBF,EAAKN,UAAY,QACjBM,EAAKf,YAAc,EACnBe,EAAK3B,QAAUA,EACf2B,EAAKxC,KATQ,OASME,EATN,QAS2BwB,OAExCc,EAAKG,QAAUJ,EAAMI,QAEdH,GAqFEI,EAAS,uCAAG,8BAAAnE,EAAA,sDAEfoE,EAAYC,IAAMC,OAAOC,SACzBC,EAAaC,KAERC,QACXF,EAAWvE,KAAO,CACdmE,aAPiB,2CAAH,qDAWTO,EAAI,uCAAG,oCAAA3E,EAAA,6DAEVwE,EAAaC,IAEblD,EAJU,UAIHiD,EAAWvE,KAAKmE,iBAJb,QAI0BC,IAAMC,OAAOC,QACjDK,EAASJ,EAAWK,aAE1BC,aAAaC,QAAQ,UAAWH,GAChCE,aAAaC,QAAQ,cAAexD,GAE9BtB,EAAO,CACTsB,OACAqD,UAZY,kBAgBNzE,MAAMR,EAAW,CACnBqF,OAAQ,MACRC,KAAM,OACNC,MAAO,WACPC,QAAS,CACL,eAAgB,mBAChB,YAAa,4CAEjBC,KAAMC,KAAKC,UAAUrF,KAxBb,yDA4BZsF,QAAQC,IAAI,mBAAZ,MA5BY,0DAAH,qDAgCJC,EAAI,uCAAG,kCAAAzF,EAAA,sDAEZwE,EAAaC,IACXG,EAASE,aAAaY,QAAQ,WAC9BtB,EAJU,UAIEU,aAAaY,QAAQ,sBAJvB,QAIyCrB,IAAMC,OAAOC,QAElEK,IAEIJ,KACAA,EAAanD,IAAMC,QAAQqE,SAAS,IAAItE,IAAMuE,QACnCrE,KAjVS,cAkVpBiD,EAAWqB,YAGfrB,EAAWvE,KAAO,CACdmE,aAGJI,EAAWsB,WAAWlB,IAlBV,2CAAH,qDAsBJmB,EAAa,uCAAG,8BAAA/F,EAAA,+EAIEG,MAAMR,EAAW,CACpCqF,OAAQ,MACRC,KAAM,OACNC,MAAO,WACPC,QAAS,CACL,eAAgB,mBAChB,YAAa,8CAVA,cAIf7E,EAJe,gBAcAA,EAASC,OAdT,cAcfyF,EAde,OAerBT,QAAQC,IAAI,gBAAiBQ,GAfR,kBAiBdA,GAjBc,kCAoBrBT,QAAQC,IAAI,oBAAZ,MApBqB,0DAAH,qDAwBbf,EAAgB,WAAO,IAAD,EAC/B,iBAAOpD,IAAMC,eAAb,aAAO,EAAe2E,OAAf,aAGEC,EAAe,WAAO,IAAD,EAC9B,iBAAOzB,WAAP,aAAO,EAAiBxE,KAAKmE,WAGpB1D,EAAM,WAAwC,IAAvCyF,EAAsC,4D,EAA1BtD,EAA0B,uCAApBuD,EAAoB,uDAAR,IAC1CC,EAAaC,MAAMC,QAAQ1D,GAAQA,EAAOA,EAAK2D,MAAMJ,GACzD,OAAOC,EAAWI,QAAO,SAACC,EAAMC,GAAP,OAAgBD,GAAQA,EAAKC,KAAOR,IAGjE,SAASvF,EAAIuF,EAAKtD,EAAMpC,GAEpB,GAAKoC,EAQL,GAJoB,kBAATA,IACPA,EAAOA,EAAK2D,MAAM,MAGlB3D,EAAKI,OAAS,EAAG,CACjB,IAAI2D,EAAI/D,EAAKgE,QACC,MAAVV,EAAIS,IAAgC,kBAAXT,EAAIS,KAC7BT,EAAIS,GAAK,IAEbhG,EAAIuF,EAAIS,GAAI/D,EAAMpC,QAElB0F,EAAItD,EAAK,IAAMpC,ECtZvB,IAAMqG,EAAU,GAEVC,EAAoB,GAWbC,EAAa,WACtB,OAAOF,EAAQG,SCdNC,EAAgB,WAIzB,IAAI7F,IAAM8F,MAAMC,MAAK,SAAAC,GAAI,MAFZ,eAEgBA,EAAK9F,QAAlC,CAIA,IAAI8F,EAAO,IAAIhG,IAAMiG,KACrBD,EAAK9F,KAPQ,aAQb8F,EAAKE,YAAc,EAEnB,IAOIC,EAAS3E,EAPT4E,EAAa,CACbC,UAAU,EACVC,QAAQ,EACRC,MAAM,EACNC,UAAW,GAMfR,EAAKS,YAAc,SAAUC,GAEzBP,EAAU3E,EAAO,KACjB,IAAImF,EAAY3G,IAAMC,QAAQ2G,QAAQF,EAAM7F,MAAOuF,GAEnD,GAAKO,EAGL,GAAID,EAAMG,UAAUrB,MACO,YAAnBmB,EAAU9H,MACV8H,EAAUR,QAAQW,aAF1B,CASA,GAFAtF,EAAOmF,EAAUjI,KAEM,YAAnBiI,EAAU9H,KACVsH,EAAUQ,EAAUR,aAEnB,GAAuB,WAAnBQ,EAAU9H,KAAmB,CAClC,IAAIkI,EAAWJ,EAAUI,SACzBZ,EAAU3E,EAAKwF,OAAOD,EAASE,MAAQ,EAAGP,EAAM7F,OAChDW,EAAK0F,SAGqB,SAAnBP,EAAU9H,MAGjBmB,IAAMC,QAAQE,YAAYgH,SAASR,EAAUjI,QAIrDsH,EAAKoB,YAAc,SAACV,GAEhB,GAAIA,EAAMhI,KAAM,CAEZ,GAAwB,WAApBgI,EAAMhI,KAAKwB,KACX,OAGJF,IAAMC,QAAQE,YAAY8B,UAAW,EACrCyE,EAAMhI,KAAKuD,UAAW,IAI9B+D,EAAKqB,YAAc,SAACX,GAEhB,GAAIP,EAAS,CACT,IAAMmB,EAAKnB,EAAQtF,MAAMmB,IAAI0E,EAAMa,OACnCpB,EAAQtF,MAAQyG,OAGX9F,GAEDA,EAAKS,WACLT,EAAKjB,SAAWiB,EAAKjB,SAASyB,IAAI0E,EAAMa,SAKpDvB,EAAKwB,UAAY,SAAAd,GAEb,GAAIP,EAAS,CAET,IAAMsB,EAAOf,EAAM7F,MAAM6G,SAAShB,EAAMa,OAClCD,EAAKZ,EAAM7F,MDpFAnC,ECsFJ,CACT0C,IAAK,gBACLzB,QAAS,CACLwG,UACAsB,OACAH,OD1FhB7B,EAAQkC,KAAKjJ,GACV+G,EAAQ7D,OALY,KAMnB6D,EAAQmC,MAGZlC,EAAkBjH,SAAQ,SAAAoJ,GAAQ,OAAIA,EAASlC,QANvB,IAACjH,KEsEdoJ,EAvEDC,gBAAK,WAEf,IAAMC,EAAMC,mBACNC,EAAcD,iBAAO,IACnBE,EAAaC,qBAAWC,IAAxBF,SA8DR,OA5DAG,qBAAU,WAEN,IAAMC,EAAQL,EAAYM,QAE1BxI,IAAMyI,MAAMT,EAAIQ,SAEhB3C,IH8Le,WAEnB,IAAI6C,EAAY1I,IAAMC,QAAQE,YAExBwI,EAAa,CACfC,MAAO,mBACPC,MAAO7I,IAAM8I,KAAKC,SAASF,MAC3BG,OAAQhJ,IAAM8I,KAAKC,SAASC,QAG1BC,EAAW,SAAC5C,GAEd,IAAM7E,EAAO,IAAIxB,IAAMyB,KAAK4E,GAK5B,OAJA7E,EAAKE,YAAc,mBACnBF,EAAKG,YAAc,EACnBH,EAAK0H,QAAS,EAEP1H,IAwDK,IAAIxB,IAAMuE,OAChBrE,KAAO,aAtDa,SAAC,GAQ3B,IAJG,IAHH0I,EAGE,EAHFA,MACAC,EAEE,EAFFA,MACAG,EACE,EADFA,OAGIG,EAAQ,GAEHC,EAAI,EAAGA,EAAIP,EAAOO,IAEvB,GAAIA,EAAI,KAAO,EAAG,CACd,IAAIzK,EAAI,IAAIqB,IAAMW,MAAMyI,EAAG,GACvBC,EAAI,IAAIrJ,IAAMW,MAAMyI,EAAGJ,GAEvBM,EAAOL,EADI,CAACtK,EAAG0K,IAGnBC,EAAK5H,YAAckH,EACnBU,EAAK3H,YAAcyH,EAAI,KAAO,EAAI,EAAI,EAEtCD,EAAMxB,KAAK2B,IAqCvBC,CAAsBZ,GA9BU,SAAC,GAQ7B,IAJG,IAHHC,EAGE,EAHFA,MACAC,EAEE,EAFFA,MACAG,EACE,EADFA,OAGIG,EAAQ,GAEHC,EAAI,EAAGA,EAAIJ,EAAQI,IAExB,GAAIA,EAAI,KAAO,EAAG,CAEd,IAAIzK,EAAI,IAAIqB,IAAMW,MAAM,EAAGyI,GACvBC,EAAI,IAAIrJ,IAAMW,MAAMkI,EAAOO,GAE3BE,EAAOL,EADI,CAACtK,EAAG0K,IAGnBC,EAAK5H,YAAckH,EACnBU,EAAK3H,YAAcyH,EAAI,KAAO,EAAI,EAAI,EAEtCD,EAAMxB,KAAK2B,IAWvBE,CAAwBb,GAExBD,EAAUlE,WG5QNiF,GACArF,IAEA+D,EAAS,CACLtJ,KAAM,eACNc,QAASkF,MAGbtG,IAEAyB,IAAM8I,KAAKY,QAAU,SAAChD,GAClB,GAAI6B,EAAM3G,OAAS,EAAG,CAElB,IAAMlC,EAAS6I,EAAMA,EAAM3G,OAAS,GACpCnC,EAASC,GAET,IAAMuH,EAAQsB,EAAMjI,QAAQZ,GACxBuH,GAAS,GACTsB,EAAMoB,OAAO1C,EAAO,KAKhC2C,aAAY,WACRrL,MACD,KAGHqL,aAAY,WAER,IAAI3E,MAAM,IACLsB,KAAK,MACLsD,KAAI,SAACnK,EAAQuH,GAAT,MAAoB,CACrBpI,KAAM,SACNc,QAAS,CACLC,SAAU,OAASqH,EACnBpH,OAAQ,CACJuC,UAAWpC,IAAM8J,MAAM7G,eAIlCxE,SAAQ,SAAAiB,GACL6I,EAAMZ,KAAKjI,QAGpB,OAMJ,CAACyI,IAGA,4BAAQH,IAAKA,EAAK+B,OAAO,c,2EClDlBC,E,YAnBX,WAAavH,GAAQ,IAAD,8BAChB,4CAAMA,KAEDwH,SAAWC,SAASC,cAAc,OAHvB,E,iFAOhBD,SAASnG,KAAKqG,YAAYC,KAAKJ,Y,6CAI/BC,SAASnG,KAAKuG,YAAYD,KAAKJ,Y,+BAI/B,OAAOM,IAASC,aAAaH,KAAK5H,MAAMgI,SAAUJ,KAAKJ,c,GAhB1CS,IAAMC,W,iBC0EZC,EAtEG,SAACnI,GAEf,IAAMoI,EAAa5C,mBACb6C,EAAW7C,mBACX8C,EAAY9C,mBAJO,EAKG+C,oBAAS,GALZ,mBAKlBC,EALkB,KAKVC,EALU,OAMSF,mBAAS,IANlB,mBAMlBG,EANkB,KAMPC,EANO,KAQzB9C,qBAAU,WACN5D,IAAgB1F,KAAKoM,KACtB,IAEH9C,qBAAU,WAWN,OATAyC,EAAUvC,QAAU6C,YAChBR,EAAWrC,QACXsC,EAAStC,QACT,CACI8C,UAAW,eACXC,SAAU,UAIX,WACHR,EAAUvC,QAAQgD,aAGvB,IAEH,IAAMC,EAAc,WAChBP,GAAU,SAAAQ,GAMN,OAJAC,YAAW,WACPZ,EAAUvC,QAAQoD,gBACnB,KAEKF,MAIhB,OACI,oCACI,4BACI1D,IAAK6C,EACLgB,UAAWpJ,EAAMoJ,UACjBhJ,QAAS4I,GAHb,QAQA,kBAAC,EAAD,KACI,yBAAKI,UAAU,mBAAmB7D,IAAK8C,GAClCG,GACG,kBAAC,IAAD,CAAWa,iBAAkB,CACzBC,aAAcN,EACdO,yBAAyB,IAEzB,yBAAKH,UAAU,UACTV,GAAa,IAAItB,KAAI,SAACnL,EAAM0C,GAAP,OACnB,yBAAKyK,UAAU,aAAazK,IAAKA,EAAK6K,SAAU,EAAGpJ,QAAS,kBAAMJ,EAAMyJ,SAASxN,KAAQA,EAAKwB,eC1D5HiM,EAAapE,gBAAK,WAAO,IAEnBI,EAAaC,qBAAWC,IAAxBF,SAEF+D,EAAWE,uBAAY,SAAAC,GACzB,IAAMlJ,EAAaC,IACnBD,EAAWsB,WAAW4H,EAAM9I,QAC5BJ,EAAWvE,KAAO,CACdmE,UAAWsJ,EAAMnM,MAGrBiI,EAAS,CACLtJ,KAAM,eACNc,QAAS0M,EAAMnM,OAGnBgE,QAAQC,IAAI,aAAckI,EAAMnM,QAEjC,CAACiI,IAEErC,EAAQ,CACV,CAAEwG,MAAO,OAAQC,UAAW,SAAC9J,GAAD,OAAW,kBAAC,EAAcA,KACtD,CAAE6J,MAAO,MAAOzJ,QAASC,GACzB,CAAEwJ,MAAO,OAAQJ,SAAUA,EAAUK,UAAW3B,GAChD,CAAE0B,MAAO,OAAQzJ,QAASS,GAC1B,CAAEgJ,MAAO,WAAYzJ,QAASL,GAC9B,CAAE8J,MAAO,WAAYzJ,QAAStB,GAC9B,CAAE+K,MAAO,aAAczJ,QAASX,GAChC,CAAEoK,MAAO,WAAYzJ,QAASP,IAKlC,OACQ,yBAAKuJ,UAAWW,IAAO1G,OAClBA,EAAM+D,KAAI,SAAC7D,EAAMiB,GAEd,IAAM0D,EAAY3E,EAAKuG,UAEvB,OAAIvG,EAAKuG,UACE,kBAAC5B,EAAD,CACHvJ,IAAK6F,EACL4E,UAAWW,IAAOC,WAClB5J,QAASmD,EAAKnD,QACdqJ,SAAUlG,EAAKkG,WAKnB,4BACI9K,IAAK6F,EACL4E,UAAWW,IAAOC,WAClB5J,QAASmD,EAAKnD,SAEbmD,EAAKsG,cAQ5BI,EAAY,WAAO,IAEbC,EAAUvE,qBAAWC,IAArBsE,MAER,OACI,yBAAKd,UAAU,cAAcc,EAAMzM,OAI5BiM,K,oBCvDAS,GAnBC7E,gBAAK,WAAO,INoDIF,EMpDL,EAEYmD,mBAASrF,KAFrB,0BAEhBF,OAFgB,MAEN,GAFM,EAEFoH,EAFE,KAOvB,ON6C4BhF,EMjDZ,SAAApC,GACZoH,EAAWpH,INiDfC,EAAkBiC,KAAKE,GM7CnB,wBAAIgE,UAAWW,KAAO/G,SACjBA,EAAQoE,KAAI,SAACnL,EAAMuI,GAAP,mBACT,wBAAI7F,IAAK6F,GAAT,UAEQvI,EAAK0C,IAFb,6BAE2B1C,EAAKiB,eAFhC,aAE2B,EAAc8H,KAAKjH,EAF9C,sBAEmD9B,EAAKiB,eAFxD,aAEmD,EAAc8H,KAAKhH,EAFtE,yBAE8E/B,EAAKiB,eAFnF,aAE8E,EAAc2H,GAAG9G,EAF/F,sBAEoG9B,EAAKiB,eAFzG,aAEoG,EAAc2H,GAAG7G,W,oBCyDtHqM,GArEF/E,gBAAK,WAAO,IAAD,EAEYiD,oBAAS,GAFrB,mBAEb+B,EAFa,KAEHC,EAFG,OAGIhC,mBAAS,IAHb,mBAGbiC,EAHa,KAGPC,EAHO,OAIwBlC,mBAAS,IAJjC,mBAIbmC,EAJa,KAIGC,EAJH,KAedC,EAAW,SAAC3G,GAEd,IAAM4G,EAAW,eACVL,EADU,eAEZvG,EAAM6G,OAAOrN,KAAOwG,EAAM6G,OAAOnO,QAGtC8N,EAAQI,IAiBZ,OAAKP,EASD,yBAAKlB,UAAWW,KAAOjO,MACnB,2BAAOiP,QAAQ,QAAf,aACA,4BAAQtN,KAAK,OAAOmN,SAAUA,GACzBF,EAAetD,KAAI,SAACnL,EAAM0C,GAAP,OAChB,4BAAQA,IAAKA,EAAKhC,MAAOV,EAAKwB,MAAOxB,EAAKwB,UAGlD,2BAAOsN,QAAQ,OAAf,0BACA,2BAAO3O,KAAK,OAAOqB,KAAK,MAAMmN,SAAUA,IACxC,2BAAOG,QAAQ,aAAf,cACA,2BAAO3O,KAAK,OAAOqB,KAAK,YAAYmN,SAAUA,IAC9C,2BAAOG,QAAQ,WAAf,mBACA,2BAAO3O,KAAK,OAAOqB,KAAK,UAAUmN,SAAUA,IAC5C,yBAAKxB,UAAWW,KAAOiB,SACnB,4BAAQ5O,KAAK,SAASgE,QArCnB,YRmFO,SAAC,GAAiC,IAA/BjD,EAA8B,EAA9BA,SAAUlB,EAAoB,EAApBA,KAAMgP,EAAc,EAAdA,QAEnCC,EAAiB,CACnB9O,KAAM,OACNE,IAAK,+CACLO,UAAW,QACXE,QAAS,WAGPoO,EAAW,SAAClP,GACdA,EAAKE,KAAL,eACOF,EAAKE,KADZ,GAEO+O,EAFP,GAGOD,IAIP9N,GACAI,IAAMC,QAAQzB,SAAS,CACnB0B,KAAMN,IAELnB,SAAQ,SAAAC,GACLkP,EAASlP,MAIjBA,GACAkP,EAASlP,GQ5GTmP,CAAW,CACPnP,KAAMyO,EAAehM,QAAO,SAAAzC,GAAI,OAAIA,EAAKwB,OAAS+M,EAAKvO,QAAM,GAC7DkB,SAAUqN,EAAKrN,SACf8N,QAAQ,aACJ7O,KAAM,QACHoO,KAIXD,GAAY,KA0BJ,QACA,4BAAQnO,KAAK,SAASgE,QApDd,WAChBmK,GAAY,KAmDJ,YAtBJ,yBAAKnB,UAAWW,KAAOjO,MACnB,4BAAQM,KAAK,SAASgE,QApCf,WACfuK,EAAkB5O,IAAWsP,MAAK,SAACnP,EAAG0K,GAAJ,OAAW1K,EAAEuB,KAAOmJ,EAAEnJ,KAAQ,GAAK,MACrE8M,GAAY,KAkCJ,YC9CHe,GAAe,CACxB7N,KAAM,YAGG8N,GAAU,SAACrB,EAAOjN,GAE3B,OAAQA,EAAOb,MACX,IAAK,eACD8N,EAAQ,CACJzM,KAAMR,EAAOC,SAOzB,OAAOgN,GCREtE,GAAqBqC,IAAMuD,gBAgBzBC,OAdf,WAAgB,IAAD,EAEaC,qBAAWH,GAASD,IAFjC,mBAENpB,EAFM,KAECxE,EAFD,KAIb,OACE,kBAACE,GAAmB+F,SAApB,CAA6BhP,MAAO,CAAEuN,QAAOxE,aAC3C,kBAAC,EAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,QCRAkG,GAAcC,QACW,cAA7BC,OAAOxH,SAASyH,UAEe,UAA7BD,OAAOxH,SAASyH,UAEhBD,OAAOxH,SAASyH,SAASnO,MACvB,2DAsCN,SAASoO,GAAgBC,EAAOnL,GAC9BoL,UAAUC,cACPC,SAASH,GACT1P,MAAK,SAAA8P,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBrC,QACfgC,UAAUC,cAAcO,YAI1BjL,QAAQC,IACN,iHAKEZ,GAAUA,EAAO6L,UACnB7L,EAAO6L,SAASN,KAMlB5K,QAAQC,IAAI,sCAGRZ,GAAUA,EAAO8L,WACnB9L,EAAO8L,UAAUP,WAO5BQ,OAAM,SAAAC,GACLrL,QAAQqL,MAAM,4CAA6CA,MC1FjEhF,IAASiF,OAAO,kBAAC,GAAD,MAAStF,SAASuF,eAAe,SDgB1C,SAAkBlM,GACvB,GAA6C,kBAAmBoL,UAAW,CAGzE,GADkB,IAAIe,IAAIC,SAAwBpB,OAAOxH,SAAS6I,MACpDC,SAAWtB,OAAOxH,SAAS8I,OAIvC,OAGFtB,OAAOuB,iBAAiB,QAAQ,WAC9B,IAAMpB,EAAK,UAAMiB,SAAN,sBAEPtB,KAgEV,SAAiCK,EAAOnL,GAEtCzE,MAAM4P,EAAO,CACX5K,QAAS,CAAE,iBAAkB,YAE5B9E,MAAK,SAAAC,GAEJ,IAAM8Q,EAAc9Q,EAAS6E,QAAQzE,IAAI,gBAEnB,MAApBJ,EAAS+Q,QACO,MAAfD,IAA8D,IAAvCA,EAAYzP,QAAQ,cAG5CqO,UAAUC,cAAcqB,MAAMjR,MAAK,SAAA8P,GACjCA,EAAaoB,aAAalR,MAAK,WAC7BuP,OAAOxH,SAASoJ,eAKpB1B,GAAgBC,EAAOnL,MAG1B+L,OAAM,WACLpL,QAAQC,IACN,oEAvFAiM,CAAwB1B,EAAOnL,GAI/BoL,UAAUC,cAAcqB,MAAMjR,MAAK,WACjCkF,QAAQC,IACN,iHAMJsK,GAAgBC,EAAOnL,OCtC/BqL,I,mBCXAyB,EAAOC,QAAU,CAAC,MAAQ,0BAA0B,WAAa,iC,mBCAjED,EAAOC,QAAU,CAAC,KAAO,mBAAmB,QAAU,wB,mBCAtDD,EAAOC,QAAU,CAAC,QAAU,2B","file":"static/js/main.83ad45ef.chunk.js","sourcesContent":["import paper from 'paper';\nimport faker from 'faker';\n\nexport const defaultFillColor = 'rgba(0,0,0,0.87)';\nexport const defaultStrokeColor = 'rgba(0,0,0,0.87)';\n\nexport const MIMIC_LAYER_NAME = \"MIMIC_LAYER\";\n\nconst sorageUrl = 'https://9tvgcnacn7.execute-api.eu-central-1.amazonaws.com/default/mimic';\n\nexport const initCanvas = (canvas) => {\n    paper.setup(canvas);\n};\n\nexport const bind = () => {\n\n    getItems()\n        .forEach(async item => {\n\n            if (item.data.type === 'rest') {\n\n                const res = await fetch(item.data.url)\n                    .then((response) => response.json());\n\n                const value = get(res, item.data.sourceKey);\n                set(item, item.data.destKey, value);\n            }\n        });\n};\n\nexport const onAction = (action) => {\n    // console.log(\"on Action:\", action);\n\n    const { item, itemName, values } = action.payload;\n\n    const processAction = (item) => {\n        if (action.type === \"update\") {\n            updateItem(item, values);\n        }\n    };\n\n    if (itemName) {\n        paper.project.getItems({\n            name: itemName\n        }).forEach(item => {\n            processAction(item);\n        });\n    }\n\n    if (item) {\n        processAction(item);\n    }\n};\n\nexport const useTool = (name) => {\n    const tool = paper.tools.find(tool => tool.name === name)\n    tool.activate()\n}\n\nexport const getItems = () => {\n    return paper.project?.activeLayer.getItems() ?? [];\n};\n\nexport const getItemsByName = (name) => {\n    return paper.project.getItems({\n        match: (item) => (item.name || \"\").indexOf(name) === 0\n    });\n};\n\nexport const updateItem = function (item, values) {\n\n    if (values.position && item.position) {\n\n        const x = values.position.x || item.position.x;\n        const y = values.position.y || item.position.y;\n        const newPosition = new paper.Point(x, y);\n\n        item.tweenTo(\n            { 'position': newPosition },\n            300\n        );\n    }\n\n    if (values.point && item.point) {\n\n        const x = values.point.x || item.point.x;\n        const y = values.point.y || item.point.y;\n        const newPoint = new paper.Point(x, y);\n\n        item.point = newPoint;\n    }\n\n    if (values.content && item.content) {\n        item.content = values.content;\n    }\n\n    const excludedValues = [\"position\", \"point\", \"content\"];\n\n    Object.keys(values)\n        .filter(key => !excludedValues.includes(key))\n        .forEach(key => {\n\n            if (item[key] !== undefined) {\n                item.tweenTo(\n                    { [key]: values[key] },\n                    300\n                );\n            }\n        });\n\n    return item;\n};\n\nexport const addBinding = ({ itemName, item, binding }) => {\n\n    const defaultBinding = {\n        type: 'rest',\n        url: 'https://jsonplaceholder.typicode.com/todos/1',\n        sourceKey: 'title',\n        destKey: 'content'\n    };\n\n    const bindItem = (item) => {\n        item.data = {\n            ...item.data,\n            ...defaultBinding,\n            ...binding\n        };\n    };\n\n    if (itemName) {\n        paper.project.getItems({\n            name: itemName\n        })\n            .forEach(item => {\n                bindItem(item);\n            })\n    }\n\n    if (item) {\n        bindItem(item);\n    }\n};\n\nexport const addLine = () => {\n\n    const name = \"line\";\n    const path = new paper.Path();\n    path.strokeColor = defaultStrokeColor;\n    path.strokeWidth = 2;\n    path.name = name + getItemsByName(name).length;\n\n    const start = new paper.Point(100, 100);\n    path.moveTo(start);\n    path.lineTo(start.add([200, -50]));\n\n    paper.project.activeLayer.selected = false;\n    path.selected = true;\n};\n\nexport const addCircle = () => {\n\n    const name = \"circle\";\n    const path = new paper.Path.Circle(new paper.Point(100, 100), 50);\n\n    path.fillColor = defaultFillColor;\n    path.strokeColor = defaultStrokeColor;\n    path.strokeWidth = 2;\n    path.closed = true;\n    path.name = name + getItemsByName(name).length;\n\n    paper.project.activeLayer.selected = false;\n    path.selected = true;\n};\n\nexport const addRect = () => {\n\n    const name = \"rect\";\n    const path = new paper.Path.Rectangle(0, 0, 100, 100);\n\n    path.fillColor = defaultFillColor;\n    path.strokeColor = defaultStrokeColor;\n    path.strokeWidth = 2;\n    path.closed = true;\n    path.name = name + getItemsByName(name).length;\n\n    paper.project.activeLayer.selected = false;\n    path.selected = true;\n};\n\nexport const addText = (props) => {\n\n    const name = \"text\";\n    const point = props.point || new paper.Point(100, 100);\n    const content = props.content || \"Text\";\n\n    const text = new paper.PointText(point);\n    text.justification = 'center';\n    text.fillColor = 'black';\n    text.strokeWidth = 2;\n    text.content = content;\n    text.name = name + getItemsByName(name).length;\n\n    text.onClick = props.onClick;\n\n    return text;\n};\n\nexport const addGrid = () => {\n\n    var prevLayer = paper.project.activeLayer;\n\n    const gridConfig = {\n        color: 'rgba(0,0,0,0.11)',\n        width: paper.view.viewSize.width,\n        height: paper.view.viewSize.height\n    };\n\n    const drawLine = (segments) => {\n\n        const path = new paper.Path(segments);\n        path.strokeColor = 'rgba(0,0,0,0.21)';\n        path.strokeWidth = 1;\n        path.locked = true;\n\n        return path;\n    };\n\n    const drawGridVerticalLines = ({\n        color,\n        width,\n        height\n    }) => {\n\n        let lines = [];\n\n        for (var i = 0; i < width; i++) {\n\n            if (i % 10 === 0) {\n                var a = new paper.Point(i, 0);\n                var b = new paper.Point(i, height);\n                var segments = [a, b];\n                var line = drawLine(segments);\n\n                line.strokeColor = color;\n                line.strokeWidth = i % 50 === 0 ? 2 : 1;\n\n                lines.push(line);\n            }\n        }\n\n        return lines;\n    }\n\n    const drawGridHorizontalLines = ({\n        color,\n        width,\n        height\n    }) => {\n\n        let lines = [];\n\n        for (var i = 0; i < height; i++) {\n\n            if (i % 10 === 0) {\n\n                var a = new paper.Point(0, i);\n                var b = new paper.Point(width, i);\n                var segments = [a, b];\n                var line = drawLine(segments);\n\n                line.strokeColor = color;\n                line.strokeWidth = i % 50 === 0 ? 2 : 1;\n\n                lines.push(line);\n            }\n        }\n\n        return lines;\n    }\n\n    var gridLayer = new paper.Layer();\n    gridLayer.name = \"grid-layer\";\n\n    drawGridVerticalLines(gridConfig);\n    drawGridHorizontalLines(gridConfig);\n\n    prevLayer.activate();\n};\n\nexport const createNew = async () => {\n\n    const mimicName = faker.random.words();\n    const mimicLayer = getMimicLayer();\n\n    mimicLayer.clear();\n    mimicLayer.data = {\n        mimicName\n    };\n};\n\nexport const save = async () => {\n    \n    const mimicLayer = getMimicLayer();\n\n    const name = mimicLayer.data.mimicName ?? faker.random.words();\n    const config = mimicLayer.exportJSON();\n\n    localStorage.setItem('project', config);\n    localStorage.setItem('projectName', name);\n\n    const data = {\n        name,\n        config\n    };\n\n    try {\n        await fetch(sorageUrl, {\n            method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'x-api-key': 'wL5upgCpe33dj3Ozu1Ron2x9PFnzlE4S7DXh8DH6',\n            },\n            body: JSON.stringify(data)\n        });\n    }\n    catch(error) {\n        console.log(\"Save mimic error\", error);\n    }\n};\n\nexport const load = async () => {\n    \n    let mimicLayer = getMimicLayer();\n    const config = localStorage.getItem('project');\n    const mimicName = localStorage.getItem('projectName') ?? faker.random.words();\n\n    if (config) {\n\n        if(!mimicLayer) {\n            mimicLayer = paper.project.addLayer(new paper.Layer());\n            mimicLayer.name = MIMIC_LAYER_NAME;\n            mimicLayer.activate();\n        }\n\n        mimicLayer.data = {\n            mimicName\n        };\n\n        mimicLayer.importJSON(config);\n    }\n};\n\nexport const getMimicsList = async () => {\n\n    try {\n\n        const response = await fetch(sorageUrl, {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'x-api-key': 'wL5upgCpe33dj3Ozu1Ron2x9PFnzlE4S7DXh8DH6',\n            }\n        });\n\n        const mimics = await response.json();\n        console.log(\"Mimics loaded\", mimics);\n\n        return mimics;\n    }\n    catch(error) {\n        console.log(\"Mimics load error\", error);\n    }\n};\n\nexport const getMimicLayer = () => {\n    return paper.project?.layers[MIMIC_LAYER_NAME];\n};\n\nexport const getMimicName = () => {\n    return getMimicLayer()?.data.mimicName;\n};\n\nexport const get = (obj = this, path, separator = '.') => {\n    var properties = Array.isArray(path) ? path : path.split(separator)\n    return properties.reduce((prev, curr) => prev && prev[curr], obj)\n};\n\nfunction set(obj, path, value) {\n\n    if (!path) {\n        return;\n    }\n\n    if (typeof path === \"string\") {\n        path = path.split('.');\n    }\n\n    if (path.length > 1) {\n        var p = path.shift();\n        if (obj[p] == null || typeof obj[p] !== 'object') {\n            obj[p] = {};\n        }\n        set(obj[p], path, value);\n    } else {\n        obj[path[0]] = value;\n    }\n};\n","\nimport { onAction } from \"../utils\";\n\nconst history = [];\nconst MAX_HISTORY_LENGTH = 1000;\nconst onChangeListeners = [];\n\nexport const addToHistory = (item) => {\n    history.push(item);\n    if(history.length > MAX_HISTORY_LENGTH) {\n        history.pop();\n    }\n\n    onChangeListeners.forEach(callback => callback(getHistory()));\n}\n\nexport const getHistory = () => {\n    return history.slice();\n}\n\nexport const removeFromHistory = (item) => {\n\n    const index = history.indexOf(item);\n\n    if (index > -1) {\n        history.splice(index, 1);\n        onChangeListeners.forEach(callback => callback(history));\n    }\n}\n\nexport const revertHistory = () => {\n\n    if(history?.length === 0) {\n        return;\n    }\n\n    const record = history.pop();\n    onChangeListeners.forEach(callback => callback(getHistory()));\n    \n    if (record?.key === \"segment.point\") {\n\n        const { segment, from } = record.payload;\n\n        if (segment) {\n            onAction({\n                type: \"update\",\n                payload: {\n                    item: segment,\n                    values: {\n                        point: from\n                    }\n                }\n            });\n        }\n    }\n}\n\nexport const onHistoryChange = (callback) => {\n    onChangeListeners.push(callback);\n}","import paper from 'paper';\nimport { addToHistory } from './history';\n\nexport const addToolSelect = () => {\n\n    const name = \"toolSelect\";\n\n    if (paper.tools.find(tool => tool.name === name)) {\n        return;\n    }\n\n    var tool = new paper.Tool();\n    tool.name = name;\n    tool.minDistance = 5;\n\n    var hitOptions = {\n        segments: true,\n        stroke: true,\n        fill: true,\n        tolerance: 5\n    };\n\n    var segment, path;\n    var movePath = false;\n\n    tool.onMouseDown = function (event) {\n\n        segment = path = null;\n        var hitResult = paper.project.hitTest(event.point, hitOptions);\n\n        if (!hitResult)\n            return;\n\n        if (event.modifiers.shift) {\n            if (hitResult.type === 'segment') {\n                hitResult.segment.remove();\n            };\n            return;\n        }\n\n        path = hitResult.item;\n\n        if (hitResult.type === 'segment') {\n            segment = hitResult.segment;\n        }\n        else if (hitResult.type === 'stroke') {\n            var location = hitResult.location;\n            segment = path.insert(location.index + 1, event.point);\n            path.smooth();\n        }\n\n        movePath = hitResult.type === 'fill';\n\n        if (movePath) {\n            paper.project.activeLayer.addChild(hitResult.item);\n        }\n    };\n\n    tool.onMouseMove = (event) => {\n\n        if (event.item) {\n\n            if (event.item.name === 'button') {\n                return;\n            }\n\n            paper.project.activeLayer.selected = false;\n            event.item.selected = true;\n        }\n    };\n\n    tool.onMouseDrag = (event) => {\n\n        if (segment) {\n            const to = segment.point.add(event.delta);\n            segment.point = to;\n            // path.smooth();\n        }\n        else if (path) {\n\n            if (path.selected) {\n                path.position = path.position.add(event.delta);\n            }\n        }\n    };\n\n    tool.onMouseUp = event => {\n\n        if (segment) {\n\n            const from = event.point.subtract(event.delta);\n            const to = event.point;\n    \n            addToHistory({\n                key: 'segment.point',\n                payload: {\n                    segment,\n                    from,\n                    to\n                }\n            });\n        }\n    };\n}\n","import React, { useEffect, memo, useRef, useContext } from 'react';\nimport paper from 'paper';\nimport { addGrid, load, bind, onAction, getMimicName } from './utils';\nimport { addToolSelect } from './tools/select';\nimport { ActiveMimicContext } from '../App';\n\nconst Paper = memo(() => {\n\n    const ref = useRef();\n    const actionQueue = useRef([]);\n    const { dispatch } = useContext(ActiveMimicContext);\n\n    useEffect(() => {\n\n        const queue = actionQueue.current;\n\n        paper.setup(ref.current);\n\n        addToolSelect();\n        addGrid();\n        load();\n\n        dispatch({\n            type: 'SetMimicName',\n            payload: getMimicName()\n        });\n\n        bind();\n\n        paper.view.onFrame = (event) => {\n            if (queue.length > 0) {\n\n                const action = queue[queue.length - 1];\n                onAction(action);\n\n                const index = queue.indexOf(action);\n                if (index > -1) {\n                    queue.splice(index, 1);\n                }\n            }\n        }\n\n        setInterval(() => {\n            bind();\n        }, 5000);\n\n        // TODO REMOVE\n        setInterval(() => {\n\n            new Array(10)\n                .fill(null)\n                .map((action, index) => ({\n                    type: \"update\",\n                    payload: {\n                        itemName: \"rect\" + index,\n                        values: {\n                            fillColor: paper.Color.random()\n                        }\n                    }\n                }))\n                .forEach(action => {\n                    queue.push(action);\n                });\n\n        }, 1000);\n\n        // return () => {\n        //     clearInterval();\n        //     clearInterval();\n        // }\n    }, [dispatch]);\n\n    return (\n        <canvas ref={ref} resize=\"resize\"></canvas>\n    );\n});\n\nexport default Paper;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nclass Portal extends React.Component {\n    constructor (props) {\n        super(props);\n\n        this.portalEl = document.createElement('div');\n    }\n\n    componentDidMount () {\n        document.body.appendChild(this.portalEl);\n    }\n\n    componentWillUnmount () {\n        document.body.removeChild(this.portalEl);\n    }\n\n    render () {\n        return ReactDOM.createPortal(this.props.children, this.portalEl);\n    }\n}\n\nexport default Portal;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { createPopper } from \"@popperjs/core\";\nimport './Popup.css';\nimport Portal from \"../Portal\";\nimport FocusTrap from \"focus-trap-react\";\nimport { getMimicsList } from '../paper/utils';\n\nconst MimicList = (props) => {\n\n    const triggerRef = useRef();\n    const popupRef = useRef();\n    const popperRef = useRef();\n    const [isOpen, setIsOpen] = useState(false);\n    const [mimicList, setMimicList] = useState([]);\n\n    useEffect(() => {\n        getMimicsList().then(setMimicList);\n    }, []);\n\n    useEffect(() => {\n\n        popperRef.current = createPopper(\n            triggerRef.current,\n            popupRef.current,\n            {\n                placement: 'bottom-start',\n                strategy: 'fixed'\n            }\n        );\n\n        return () => {\n            popperRef.current.destroy();\n        }\n\n    }, []);\n\n    const togglePopup = () => {\n        setIsOpen(prevValue => {\n\n            setTimeout(() => {\n                popperRef.current.forceUpdate();\n            }, 10);\n\n            return !prevValue;\n        });\n    };\n\n    return (\n        <>\n            <button\n                ref={triggerRef}\n                className={props.className}\n                onClick={togglePopup}\n            >\n                Load\n                </button>\n\n            <Portal>\n                <div className=\"popup__container\" ref={popupRef}>\n                    {isOpen &&\n                        <FocusTrap focusTrapOptions={{\n                            onDeactivate: togglePopup,\n                            clickOutsideDeactivates: true,\n                        }}>\n                            <div className=\"popup\">\n                                {(mimicList || []).map((item, key) =>\n                                    <div className=\"popup-item\" key={key} tabIndex={0} onClick={() => props.onSelect(item)}>{item.name}</div>\n                                )}\n                            </div>\n                        </FocusTrap>\n                    }\n                </div>\n            </Portal>\n        </>\n    );\n};\n\nexport default MimicList;","import React, { memo, useCallback, useContext } from 'react';\nimport { addLine, addCircle, addRect, addText, save, createNew, getMimicLayer } from '../utils';\n// import { revertHistory } from '../tools/history';\n\nimport styles from './PaperTools.module.css';\nimport MimicList from '../../MimicList';\nimport { ActiveMimicContext } from '../../App';\n\nconst PaperTools = memo(() => {\n\n    const { dispatch } = useContext(ActiveMimicContext);\n\n    const onSelect = useCallback(mimic => {\n        const mimicLayer = getMimicLayer();\n        mimicLayer.importJSON(mimic.config);\n        mimicLayer.data = {\n            mimicName: mimic.name\n        };\n\n        dispatch({\n            type: 'SetMimicName',\n            payload: mimic.name\n        });\n\n        console.log('mimic.name', mimic.name);\n\n    }, [dispatch]);\n\n    const tools = [\n        { title: \"Name\", component: (props) => <MimicName {...props} />},\n        { title: \"New\", onClick: createNew },\n        { title: \"Load\", onSelect: onSelect, component: MimicList },\n        { title: \"Save\", onClick: save },\n        { title: \"Add Text\", onClick: addText },\n        { title: \"Add Line\", onClick: addLine },\n        { title: \"Add Circle\", onClick: addCircle },\n        { title: \"Add Rect\", onClick: addRect },\n        // { title: \"Undo\", onClick: revertHistory },\n        // { title: \"Refresh Bindings\", onClick: bind}\n    ];\n\n    return (\n            <div className={styles.tools}>\n                {tools.map((tool, index) => {\n\n                    const Component = tool.component;\n\n                    if (tool.component) {\n                        return <Component\n                            key={index}\n                            className={styles.toolButton}\n                            onClick={tool.onClick}\n                            onSelect={tool.onSelect}\n                        />;\n                    }\n\n                    return (\n                        <button\n                            key={index}\n                            className={styles.toolButton}\n                            onClick={tool.onClick}\n                        >\n                            {tool.title}\n                        </button>\n                    );\n                })}\n            </div>\n    );\n});\n\nconst MimicName = () => {\n\n    const { state } = useContext(ActiveMimicContext);\n\n    return (\n        <div className=\"mimic-name\">{state.name}</div>\n    )\n}\n\nexport default PaperTools;\n","import React, { memo, useState } from \"react\";\nimport { getHistory, onHistoryChange } from \"../tools/history\";\n\nimport styles from './History.module.css';\n\nconst History = memo(() => {\n\n    const [history = [], setHistory] = useState(getHistory());\n    onHistoryChange(history => {\n        setHistory(history);\n    });\n\n    return (\n        <ul className={styles.history}>\n            {history.map((item, index) =>\n                <li key={index}>\n                    {/* {`${item.key}: x/y=${item.payload?.from.x}=>${item.payload?.to.x} y=${item.payload?.from.y}=>${item.payload?.to.y}`} */}\n                    {`${item.key}: x/y = ${item.payload?.from.x}/${item.payload?.from.y} -> ${item.payload?.to.x}/${item.payload?.to.y}`}\n                </li>\n            )}\n        </ul>\n    );\n});\n\nexport default History;\n","import React, { memo, useState } from \"react\";\n\nimport styles from './Bind.module.css';\nimport { addBinding, getItems } from \"../utils\";\n\nconst Bind = memo(() => {\n\n    const [showBind, setShowBind] = useState(false);\n    const [form, setForm] = useState({});\n    const [availableItems, setAvailableItems] = useState([]);\n\n    const onShowBind = () => {\n        setAvailableItems(getItems().sort((a, b) => (a.name > b.name) ? 1 : -1));\n        setShowBind(true);\n    };\n\n    const onCloseBind = () => {\n        setShowBind(false);\n    };\n\n    const onChange = (event) => {\n\n        const updatedForm = {\n            ...form,\n            [event.target.name]: event.target.value\n        }\n\n        setForm(updatedForm);\n    };\n\n    const onBind = () => {\n\n        addBinding({\n            item: availableItems.filter(item => item.name === form.item)[0],\n            itemName: form.itemName,\n            binding: {\n                type: 'rest',\n                ...form\n            }\n        });\n\n        setShowBind(false);\n    }\n\n    if (!showBind) {\n        return (\n            <div className={styles.bind}>\n                <button type=\"button\" onClick={onShowBind}>Bind</button>\n            </div>\n        );\n    }\n\n    return (\n        <div className={styles.bind}>\n            <label htmlFor=\"item\">Item Name</label>\n            <select name=\"item\" onChange={onChange}>\n                {availableItems.map((item, key) =>\n                    <option key={key} value={item.name}>{item.name}</option>\n                )}\n            </select>\n            <label htmlFor=\"url\">Url with JSON response</label>\n            <input type=\"text\" name=\"url\" onChange={onChange}></input>\n            <label htmlFor=\"sourceKey\">Source Key</label>\n            <input type=\"text\" name=\"sourceKey\" onChange={onChange}></input>\n            <label htmlFor=\"destKey\">Destination Key</label>\n            <input type=\"text\" name=\"destKey\" onChange={onChange}></input>\n            <div className={styles.actions}>\n                <button type=\"button\" onClick={onBind}>Bind</button>\n                <button type=\"button\" onClick={onCloseBind}>Cancel</button>\n            </div>\n        </div>\n    );\n});\n\nexport default Bind;\n","\nexport const initialState = {\n    name: 'Untitled'\n};\n\nexport const reducer = (state, action) => {\n\n    switch (action.type) {\n        case 'SetMimicName':\n            state = {\n                name: action.payload\n            };\n            break;\n        default:\n            break;\n    }\n\n    return state;\n}\n","import React, { useReducer } from 'react';\nimport Paper from './paper';\nimport PaperTools from './paper/PaperTools';\nimport History from './paper/History';\nimport Bind from './paper/Bind';\nimport { reducer, initialState } from './store/activeMimic/reducer';\n\n// import './App.css';\n\nexport const ActiveMimicContext = React.createContext();\n\nfunction App() {\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <ActiveMimicContext.Provider value={{ state, dispatch }}>\n      <Paper />\n      <PaperTools />\n      <History />\n      <Bind />\n    </ActiveMimicContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorker.register();\n\n// serviceWorker.register({\n//     onUpdate: () => alert(\"New content is available and will be used when all tabs for this page are closed.\"),\n//     onSuccess: () => () => {\n//         alert(\"Content is cached for offline use.\");\n\n//     }\n// });\n\n// setInterval(() => {\n\n//     navigator.serviceWorker.getRegistration()\n//         .then(registration => {\n//             registration.update();\n\n//         });\n\n// }, 3000);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tools\":\"PaperTools_tools__1gGrH\",\"toolButton\":\"PaperTools_toolButton__3H_SE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bind\":\"Bind_bind__3PT2w\",\"actions\":\"Bind_actions__3CvtG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"history\":\"History_history__3cTjF\"};"],"sourceRoot":""}